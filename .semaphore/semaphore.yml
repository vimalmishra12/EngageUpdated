version: v1.0
name: SampleTest
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu2004
blocks:
  - name: SampleTest
    task:
      prologue:
        commands:
          - checkout
          - sudo apt-get update
          - sudo apt-get remove -y google-chrome-stable
          - sudo apt-get install -y wget unzip
          - 'wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb'
          - sudo dpkg -i google-chrome-stable_current_amd64.deb
          - sudo apt-get install -f -y
          - 'wget https://chromedriver.storage.googleapis.com/114.0.5735.90/chromedriver_linux64.zip'
          - unzip chromedriver_linux64.zip
          - sudo mv chromedriver /usr/local/bin/chromedriver
          - chromedriver --version
          - google-chrome --version
      jobs:
        - name: LoginTest
          commands:
            - cd engageAutomation
            - sem-version node 14.21.3
            - cache restore
            - npm install
            - cache store
            - npm run landingFeatureTest
